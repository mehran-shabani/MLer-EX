# مدل‌ها، قیمت‌گذاری و پیکربندی

## مدل‌های هوش مصنوعی

### 🤖 **انواع مدل‌ها**

#### ۱. مدل‌های OpenAI

##### GPT-4o
```json
{
  "model": "gpt-4o",
  "contextWindow": 128000,
  "capabilities": [
    "کدنویسی پیشرفته",
    "تحلیل کد پیچیده", 
    "refactoring هوشمند",
    "تولید مستندات",
    "حل مسائل پیچیده"
  ],
  "bestFor": [
    "پروژه‌های بزرگ و پیچیده",
    "معماری نرم‌افزار",
    "بررسی کد تخصصی",
    "تحلیل عملکرد"
  ]
}
```

##### GPT-4o Mini  
```json
{
  "model": "gpt-4o-mini",
  "contextWindow": 128000,
  "speed": "بسیار سریع",
  "capabilities": [
    "تکمیل کد سریع",
    "پیشنهادات ساده",
    "رفع خطاهای کوچک",
    "تولید کد استاندارد"
  ],
  "bestFor": [
    "تکمیل روزانه کد",
    "پیشنهادات سریع",
    "کدنویسی معمولی"
  ]
}
```

#### ۲. مدل‌های Anthropic

##### Claude 3.5 Sonnet
```json
{
  "model": "claude-3.5-sonnet",
  "contextWindow": 200000,
  "specialties": [
    "تحلیل عمیق کد",
    "refactoring پیچیده",
    "بررسی امنیتی",
    "بهینه‌سازی عملکرد"
  ],
  "bestFor": [
    "code review تخصصی",
    "تحلیل معماری",
    "بهینه‌سازی الگوریتم‌ها",
    "حل مسائل پیچیده"
  ]
}
```

#### ۳. مدل‌های Cursor

##### Cursor Small
```json
{
  "model": "cursor-small", 
  "contextWindow": 32000,
  "speed": "فوق‌العاده سریع",
  "optimizedFor": [
    "تکمیل کد real-time",
    "پیشنهادات inline",
    "مصرف کم منابع"
  ],
  "bestFor": [
    "coding sessions طولانی",
    "سیستم‌های کم منابع",
    "پیشنهادات مداوم"
  ]
}
```

#### ۴. حالت Auto
```json
{
  "mode": "auto",
  "strategy": "انتخاب هوشمند مدل",
  "criteria": [
    "نوع درخواست",
    "پیچیدگی کد",
    "سرعت مورد نیاز",
    "کیفیت مطلوب"
  ],
  "examples": {
    "simpleCompletion": "cursor-small",
    "complexRefactoring": "claude-3.5-sonnet", 
    "codeGeneration": "gpt-4o",
    "quickFix": "gpt-4o-mini"
  }
}
```

### ⚙️ **تنظیمات مدل‌ها**

#### پارامترهای عملکرد:

##### Temperature (میزان خلاقیت)
```javascript
const temperatureSettings = {
  conservative: 0.1,  // پیشنهادات محافظه‌کارانه و دقیق
  balanced: 0.5,      // حالت متعادل (پیش‌فرض)
  creative: 0.9       // پیشنهادات خلاق و متنوع
};

// کاربرد:
// conservative: برای کد production
// balanced: برای توسعه عمومی  
// creative: برای prototype و ایده‌پردازی
```

##### Context Window Management
```json
{
  "contextManagement": {
    "maxFiles": 15,
    "maxTokensPerFile": 3000,
    "priorityOrder": [
      "currentFile",
      "recentlyModified", 
      "importedFiles",
      "relatedTests",
      "documentation"
    ]
  }
}
```

## قیمت‌گذاری و پلن‌ها

### 💰 **پلن‌های اشتراک**

#### ۱. Free Plan
```json
{
  "plan": "Free",
  "price": "0 دلار/ماه",
  "limitations": {
    "requests": "محدود",
    "models": ["cursor-small"],
    "features": "پایه"
  },
  "includes": [
    "تکمیل کد محدود",
    "ویرایش inline محدود",
    "دسترسی به community"
  ]
}
```

#### ۲. Pro Plan
```json
{
  "plan": "Pro", 
  "price": "20 دلار/ماه",
  "features": [
    "استفاده نامحدود از تمام مدل‌ها",
    "دسترسی کامل به Agent",
    "Composer unlimited",
    "Priority support",
    "Advanced context management"
  ],
  "limits": {
    "requests": "نامحدود",
    "contextWindow": "کامل",
    "fileSize": "تا 10MB"
  }
}
```

#### ۳. Business Plan
```json
{
  "plan": "Business",
  "price": "40 دلار/ماه",
  "additionalFeatures": [
    "Team management",
    "Centralized billing", 
    "Advanced security",
    "Custom rules deployment",
    "Analytics dashboard",
    "SLA guarantee"
  ],
  "teamFeatures": [
    "Shared memories",
    "Team rules",
    "Usage analytics",
    "Admin controls"
  ]
}
```

### 💳 **استفاده از API Keys شخصی**

#### مزایای BYOK (Bring Your Own Key):

##### ۱. کنترل کامل هزینه
```json
{
  "costControl": {
    "directBilling": "پرداخت مستقیم به OpenAI/Anthropic",
    "noMiddleman": "بدون هزینه اضافی Cursor",
    "usage tracking": "کنترل دقیق مصرف",
    "budgetLimits": "تنظیم محدودیت بودجه"
  }
}
```

##### ۲. سرعت و کیفیت بالاتر
```json
{
  "performance": {
    "directAccess": "دسترسی مستقیم به API",
    "noQueue": "بدون صف انتظار",
    "latestModels": "دسترسی به جدیدترین مدل‌ها",
    "customParameters": "تنظیمات سفارشی"
  }
}
```

#### تنظیم API Keys:

##### OpenAI Setup:
```json
{
  "provider": "OpenAI",
  "apiKey": "sk-...",
  "organization": "org-...",
  "models": {
    "completion": "gpt-4o",
    "chat": "gpt-4o",
    "embedding": "text-embedding-ada-002"
  },
  "settings": {
    "temperature": 0.2,
    "maxTokens": 4000,
    "topP": 1.0
  }
}
```

##### Anthropic Setup:
```json
{
  "provider": "Anthropic",
  "apiKey": "sk-ant-...",
  "models": {
    "primary": "claude-3-5-sonnet-20241022",
    "fallback": "claude-3-haiku-20240307"
  },
  "settings": {
    "temperature": 0.1,
    "maxTokens": 8000
  }
}
```

## پیکربندی پیشرفته

### 🛠️ **Workspace Configuration**

#### ۱. فایل تنظیمات پروژه (`.cursor/settings.json`)
```json
{
  "version": "1.0",
  "project": {
    "name": "My Project",
    "type": "web-application",
    "language": "typescript",
    "framework": "react"
  },
  "ai": {
    "defaultModel": "gpt-4o",
    "fallbackModel": "cursor-small",
    "contextStrategy": "smart",
    "maxContextFiles": 12
  },
  "rules": {
    "file": ".cursor/rules",
    "enabled": true,
    "strict": false
  },
  "integrations": {
    "git": {
      "autoCommit": false,
      "smartMessages": true,
      "conflictResolution": true
    },
    "linting": {
      "eslint": true,
      "prettier": true,
      "typescript": true
    }
  },
  "performance": {
    "caching": true,
    "indexing": "background",
    "suggestionDelay": 200
  }
}
```

#### ۲. Global User Settings
```json
{
  "user": {
    "preferences": {
      "language": "fa",
      "theme": "dark",
      "fontSize": 14,
      "fontFamily": "Fira Code"
    },
    "ai": {
      "defaultTemperature": 0.3,
      "preferredModel": "auto",
      "contextPreference": "focused"
    },
    "shortcuts": {
      "agent": "Ctrl+I",
      "inlineEdit": "Ctrl+K", 
      "composer": "Ctrl+Shift+I",
      "chat": "Ctrl+L"
    }
  }
}
```

### 🎯 **Performance Tuning**

#### ۱. Context Optimization
```json
{
  "contextOptimization": {
    "strategy": "semantic",
    "maxFiles": 10,
    "fileSelection": {
      "current": 1.0,      // فایل فعلی
      "imported": 0.8,     // فایل‌های import شده
      "similar": 0.6,      // فایل‌های مشابه
      "recent": 0.4,       // فایل‌های اخیر
      "tests": 0.3         // فایل‌های تست
    },
    "excludePatterns": [
      "node_modules/**",
      "dist/**",
      "*.log",
      ".git/**"
    ]
  }
}
```

#### ۲. Model Selection Strategy
```javascript
const modelStrategy = {
  // بر اساس نوع درخواست
  completion: {
    simple: 'cursor-small',
    complex: 'gpt-4o-mini',
    creative: 'gpt-4o'
  },
  
  // بر اساس اندازه فایل
  fileSize: {
    small: 'cursor-small',    // < 100 خط
    medium: 'gpt-4o-mini',    // 100-500 خط  
    large: 'claude-3.5'       // > 500 خط
  },
  
  // بر اساس زبان برنامه‌نویسی
  language: {
    javascript: 'gpt-4o',
    python: 'claude-3.5',
    rust: 'gpt-4o',
    sql: 'claude-3.5'
  }
};
```

#### ۳. Caching Configuration
```json
{
  "caching": {
    "enabled": true,
    "strategies": {
      "completion": {
        "ttl": 3600,        // 1 ساعت
        "maxSize": "100MB"
      },
      "context": {
        "ttl": 1800,        // 30 دقیقه  
        "maxSize": "50MB"
      },
      "embeddings": {
        "ttl": 86400,       // 24 ساعت
        "maxSize": "200MB"
      }
    }
  }
}
```

## مدیریت تیم و سازمان

### 👥 **Team Management**

#### ۱. تنظیمات تیم
```json
{
  "team": {
    "name": "Development Team",
    "members": [
      {
        "email": "dev1@company.com",
        "role": "admin",
        "permissions": ["full-access"]
      },
      {
        "email": "dev2@company.com", 
        "role": "developer",
        "permissions": ["code-edit", "chat"]
      }
    ],
    "sharedResources": {
      "rules": true,
      "memories": true,
      "configurations": true
    }
  }
}
```

#### ۲. Role-Based Access Control
```json
{
  "roles": {
    "admin": {
      "permissions": [
        "manage-team",
        "edit-global-rules",
        "view-analytics", 
        "manage-billing"
      ]
    },
    "senior-dev": {
      "permissions": [
        "edit-project-rules",
        "access-all-models",
        "manage-integrations"
      ]
    },
    "developer": {
      "permissions": [
        "code-completion",
        "inline-edit",
        "chat-access"
      ]
    },
    "junior-dev": {
      "permissions": [
        "basic-completion",
        "guided-chat"
      ],
      "limitations": {
        "dailyRequests": 100,
        "models": ["cursor-small", "gpt-4o-mini"]
      }
    }
  }
}
```

### 📊 **Analytics و Monitoring**

#### ۱. Usage Analytics
```json
{
  "analytics": {
    "daily": {
      "requests": 1250,
      "completions": 890,
      "chats": 45,
      "agentTasks": 23
    },
    "popular": {
      "models": ["gpt-4o", "cursor-small"],
      "languages": ["typescript", "python"],
      "features": ["tab-completion", "inline-edit"]
    },
    "performance": {
      "avgResponseTime": "1.2s",
      "successRate": "97%",
      "userSatisfaction": "4.8/5"
    }
  }
}
```

#### ۲. Cost Tracking
```json
{
  "costTracking": {
    "monthly": {
      "total": "$45.67",
      "breakdown": {
        "gpt-4o": "$32.10",
        "claude-3.5": "$8.90", 
        "cursor-small": "$4.67"
      }
    },
    "perUser": {
      "dev1@company.com": "$15.20",
      "dev2@company.com": "$12.80",
      "dev3@company.com": "$17.67"
    },
    "trends": {
      "lastMonth": "+12%",
      "prediction": "$52 next month"
    }
  }
}
```

## تنظیمات امنیتی پیشرفته

### 🔒 **Security Configuration**

#### ۱. Data Protection
```json
{
  "security": {
    "dataProtection": {
      "encryptionAtRest": true,
      "encryptionInTransit": "TLS 1.3",
      "keyManagement": "local-keychain",
      "dataRetention": {
        "logs": "30 days",
        "cache": "7 days", 
        "memories": "1 year"
      }
    },
    "accessControl": {
      "mfa": true,
      "sessionTimeout": 3600,
      "ipWhitelist": ["192.168.1.0/24"],
      "deviceLimit": 3
    }
  }
}
```

#### ۲. Code Privacy
```json
{
  "privacy": {
    "codeSharing": {
      "enabled": false,
      "anonymization": true,
      "excludePatterns": [
        "*.env*",
        "*secret*",
        "*password*",
        "*key*",
        "credentials/**"
      ]
    },
    "localProcessing": {
      "enabled": true,
      "models": ["cursor-small"],
      "fallbackToCloud": false
    }
  }
}
```

#### ۳. Compliance Settings
```json
{
  "compliance": {
    "standards": ["SOC2", "GDPR", "HIPAA"],
    "auditLog": {
      "enabled": true,
      "retention": "2 years",
      "events": [
        "code-access",
        "model-usage",
        "data-export",
        "settings-change"
      ]
    },
    "dataResidency": {
      "region": "EU",
      "localProcessing": true
    }
  }
}
```

## پیکربندی محیط توسعه

### 🖥️ **IDE Configuration**

#### ۱. Editor Settings
```json
{
  "editor": {
    "fontSize": 14,
    "fontFamily": "Fira Code, Consolas, monospace",
    "lineHeight": 1.5,
    "tabSize": 2,
    "insertSpaces": true,
    "wordWrap": "on",
    "minimap": {
      "enabled": true,
      "scale": 2
    },
    "bracketPairColorization": true,
    "guides": {
      "indentation": true,
      "bracketPairs": true
    }
  }
}
```

#### ۲. AI Assistant Settings  
```json
{
  "aiAssistant": {
    "suggestions": {
      "enabled": true,
      "delay": 200,
      "maxSuggestions": 3,
      "showInlinePreview": true
    },
    "completion": {
      "triggerCharacters": [".", "(", "[", "{"],
      "autoAccept": false,
      "contextAware": true
    },
    "chat": {
      "persistHistory": true,
      "maxHistoryItems": 100,
      "autoSave": true
    }
  }
}
```

#### ۳. Language-Specific Settings
```json
{
  "languages": {
    "typescript": {
      "compiler": {
        "strict": true,
        "noImplicitAny": true,
        "strictNullChecks": true
      },
      "formatting": {
        "semicolons": true,
        "quotes": "single",
        "trailingComma": "es5"
      },
      "ai": {
        "preferInterfaces": true,
        "generateJSDoc": true,
        "strictTypes": true
      }
    },
    "python": {
      "interpreter": "/usr/bin/python3",
      "formatter": "black",
      "linter": "pylint",
      "ai": {
        "generateDocstrings": true,
        "typeHints": true,
        "followPEP8": true
      }
    }
  }
}
```

## بهینه‌سازی عملکرد

### ⚡ **Performance Optimization**

#### ۱. Memory Management
```json
{
  "memoryOptimization": {
    "maxMemoryUsage": "2GB",
    "garbageCollection": {
      "interval": 300000,    // 5 دقیقه
      "aggressive": false
    },
    "cache": {
      "maxSize": "500MB",
      "cleanupThreshold": 0.8
    }
  }
}
```

#### ۲. Network Optimization
```json
{
  "network": {
    "timeout": 30000,
    "retries": 3,
    "compression": true,
    "keepAlive": true,
    "connectionPool": {
      "maxConnections": 10,
      "idleTimeout": 60000
    }
  }
}
```

#### ۳. Indexing Optimization
```json
{
  "indexing": {
    "strategy": "incremental",
    "schedule": "background",
    "excludePatterns": [
      "node_modules/**",
      "*.log",
      "dist/**",
      ".git/**"
    ],
    "includePatterns": [
      "src/**/*.{js,ts,jsx,tsx}",
      "tests/**/*.{js,ts}",
      "docs/**/*.md"
    ],
    "maxFileSize": "1MB",
    "batchSize": 50
  }
}
```

## مانیتورینگ و عیب‌یابی

### 📈 **Monitoring Dashboard**

#### ۱. Real-time Metrics
```json
{
  "realTimeMetrics": {
    "activeUsers": 12,
    "requestsPerMinute": 45,
    "avgResponseTime": "1.1s",
    "errorRate": "1.2%",
    "modelUsage": {
      "gpt-4o": "45%",
      "claude-3.5": "30%", 
      "cursor-small": "25%"
    }
  }
}
```

#### ۲. Health Checks
```javascript
// سیستم نظارت بر سلامت
const healthCheck = {
  api: {
    status: 'healthy',
    responseTime: '120ms',
    uptime: '99.9%'
  },
  models: {
    'gpt-4o': 'operational',
    'claude-3.5': 'operational',
    'cursor-small': 'operational'
  },
  integrations: {
    git: 'connected',
    slack: 'connected', 
    linear: 'connected'
  }
};
```

### 🐛 **Troubleshooting**

#### مشکلات رایج و راه‌حل‌ها:

##### ۱. کندی در پیشنهادات
```json
{
  "solutions": [
    "کاهش context window size",
    "استفاده از مدل سریع‌تر (cursor-small)",
    "فعال‌سازی local caching",
    "حذف فایل‌های غیرضروری از context"
  ]
}
```

##### ۲. پیشنهادات نامرتبط
```json
{
  "solutions": [
    "بهبود Rules و context",
    "اضافه کردن مثال‌های بیشتر",
    "تنظیم temperature پایین‌تر",
    "مشخص کردن فایل‌های مرتبط"
  ]
}
```

##### ۳. خطاهای اتصال
```json
{
  "solutions": [
    "بررسی اتصال اینترنت",
    "تأیید صحت API keys",
    "چک کردن firewall settings",
    "بررسی proxy configurations"
  ]
}
```

## Custom Extensions

### 🔌 **توسعه افزونه‌های سفارشی**

#### ۱. ساختار افزونه
```typescript
// cursor-extension.ts
import * as vscode from 'vscode';

export function activate(context: vscode.ExtensionContext) {
  // ثبت دستورات سفارشی
  const disposable = vscode.commands.registerCommand(
    'myExtension.customCommand',
    () => {
      // منطق سفارشی
      vscode.window.showInformationMessage('Custom command executed!');
    }
  );
  
  context.subscriptions.push(disposable);
}

export function deactivate() {}
```

#### ۲. ادغام با Cursor AI
```typescript
// استفاده از Cursor API در افزونه
import { CursorAPI } from 'cursor-sdk';

class CustomAIFeature {
  private cursor: CursorAPI;
  
  constructor() {
    this.cursor = new CursorAPI({
      apiKey: vscode.workspace.getConfiguration().get('cursor.apiKey')
    });
  }
  
  async generateCustomCode(prompt: string) {
    const result = await this.cursor.complete({
      prompt,
      model: 'gpt-4o',
      temperature: 0.2
    });
    
    return result.code;
  }
}
```

---

## نکات عملی

### 💡 **بهترین شیوه‌ها**

#### ۱. انتخاب مدل مناسب
```text
کار روزانه → cursor-small (سریع و کارآمد)
پروژه‌های پیچیده → gpt-4o (قدرتمند)  
تحلیل کد → claude-3.5 (دقیق)
تولید مستندات → gpt-4o (خلاق)
```

#### ۲. مدیریت هزینه
```text
- از BYOK برای استفاده زیاد استفاده کنید
- مدل‌های کوچک‌تر را برای کارهای ساده انتخاب کنید
- context را محدود کنید
- caching را فعال کنید
```

#### ۳. بهینه‌سازی عملکرد
```text
- Rules واضح و مفصل تعریف کنید
- فایل‌های غیرضروری را exclude کنید  
- Memory ها را منظماً مدیریت کنید
- Network settings را بهینه کنید
```

---

## خلاصه

این بخش راهنمای جامعی از:
- **انتخاب و تنظیم مدل‌های مختلف**
- **مدیریت هزینه‌ها و قیمت‌گذاری**
- **پیکربندی پیشرفته محیط**
- **بهینه‌سازی عملکرد**
- **مدیریت تیم و امنیت**

ارائه می‌دهد که به شما کمک می‌کند Cursor را به بهترین شکل ممکن برای نیازهای خود تنظیم کنید.

---
*این مستند راهنمای تخصصی پیکربندی و بهینه‌سازی Cursor است.*